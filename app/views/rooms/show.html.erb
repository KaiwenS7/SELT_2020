<div id="room-information">
  <h2>Welcome To <%= @room.name %></h2>
  <h2>Room Join Code: <%= @room.room_code %></h2>
</div>
<div class="base-room">
  <div class="left-panel">
<!--    TODO: Add dynamic button generation -->
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>
    <Button class="btn btn-outline-dark ">View Player X's Hand</Button>

  </div>
  <div class="center-panel">
    <div class="top-center-panel">
<!--      TODO: Show Pile Interaction Goes Here -->
      <h2>EXAMPLE: Interacting with players on the left column will show a more detailed view of their hands here</h2>
    </div>
    <div class="middle-center-panel">
      <div class="draw-discard">
        <Button type="button" class="btn blank-card btn-outline-secondary">Draw Pile</Button>
        <Button type="button" class="btn blank-card btn-outline-secondary">Discard Pile</Button>
      </div>
      <div class="piles">
        <div class="piles-top">
          <!--TODO: Add if for if there is a deck here. If yes, use deck prop. If not, display button-->
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
        </div>
        <div class="piles-bottom">
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
          <Button type="button" class="btn blank-card btn-outline-secondary">+</Button>
        </div>
      </div>
    </div>
    <div class="playingCards simpleCards faceImages bottom-center-panel" id="root-playing-card">
<!--      TODO: Replace with dynamically generated hand-->
      <% pile = Pile.where(room_id: @room, creator: @current_user.user_id)[0] %>
      <ul class="hand" id ="users-cards">
      <% Card.where(pile_id: pile.id).each do |card| %>
        <li>
          <% if pile.private_pile %>
            <a class="card back">*</a>
          <% else %>
            <% if card.name.split[2] == "Diamonds" %>
              <% suit = "diams" %>
            <% else %>
              <% suit = card.name.split[2].downcase %>
            <% end %>
            <% if card.name.split[0].match(/^\d+$/) %>
              <% card_name = card.name.split[0] %>
            <% else %>
              <% card_name = card.name[0] %>
            <% end %>
            <a class="card rank-<%= card_name %> <%=suit%>">
              <span class="rank"><%=card_name%></span>
              <span class="suit">&<%=suit%>;</span>
            </a>
          <% end %>
        </li> 
          <% end %>

      </ul>
      <div class="card-action-buttons">
        <Button type="button" class="btn btn-outline-primary spread-button" onclick="changeCards()">Spread/Unspread Cards</Button>
        <Button type="button" class="btn btn-outline-primary spread-button" onclick="fanCards()">Fan/Unfan Cards</Button>
      </div>
      <script>
        function changeCards(){
            if(document.getElementById('users-cards').getAttribute('class') === 'hand'){
                document.getElementById('users-cards').setAttribute('class', 'table')
            } else {
                document.getElementById('users-cards').setAttribute('class', 'hand')
            }
        }

        function fanCards(){
            if(document.getElementById('root-playing-card').getAttribute('class').match(/rotateHand/)){
                document.getElementById('root-playing-card').classList.remove('rotateHand')
            
            } else {
                document.getElementById('root-playing-card').classList.add('rotateHand')
                if(document.getElementById('user-cards').getAttribute('class')=== 'table'){
                    document.getElementById('user-cards').classList.remove('table')
                    document.getElementById('user-cards').classList.add('hand')
                }
            }
        }
      </script>
    </div>
  </div>
  <div class="right-panel">
<!--    <ActionsPanel/>-->
    <div id="game-actions">
      <Button type="button" class="btn btn-outline-primary">Draw</Button>
      <Button type="button" class="btn btn-outline-primary">Transfer</Button>
      <Button type="button" class="btn btn-outline-primary">Reset Deck</Button>
      <Button type="button" class="btn btn-outline-primary">Show Hand</Button>
    </div>
    <div id="dangerous-game-actions">
      <Button type="button" class="btn btn-danger">Reset Game</Button>
      <Button type="button" class="btn btn-danger">Quit Game</Button>
    </div>
  </div>
</div>
